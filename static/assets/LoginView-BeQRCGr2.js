import{g as Z,m as ee,_ as T,r as oe,w as ne,d as te,P as y,u as le,s as I,c as se,E as ae,C as ie,I as re,a as ce,b as de,e as ue,f as pe,h as ge,i as me,j as a,k as fe,l as ve,n as _e,T as $e,t as he,o as ye,v as Ce,p as W,q as xe,x as we,y as P,z as Se,A as Ie,B as j,D as b,F as be,G as q,H as Be,J as Te,K as He,L as ze}from"./index-C2dmRDPi.js";import{F as Ee,_ as Ae}from"./index-5isM8Ywt.js";import{c as Le,B as Fe}from"./Col-OFPoDzyD.js";import{_ as ke}from"./index-BbVPVhte.js";const B=(e,o,n,r,t)=>({backgroundColor:e,border:`${r.lineWidth}px ${r.lineType} ${o}`,[`${t}-icon`]:{color:n}}),Me=e=>{const{componentCls:o,motionDurationSlow:n,marginXS:r,marginSM:t,fontSize:d,fontSizeLG:i,lineHeight:u,borderRadiusLG:p,motionEaseInOutCirc:l,alertIconSizeLG:g,colorText:m,paddingContentVerticalSM:f,alertPaddingHorizontal:_,paddingMD:$,paddingContentHorizontalLG:h}=e;return{[o]:T(T({},oe(e)),{position:"relative",display:"flex",alignItems:"center",padding:`${f}px ${_}px`,wordWrap:"break-word",borderRadius:p,[`&${o}-rtl`]:{direction:"rtl"},[`${o}-content`]:{flex:1,minWidth:0},[`${o}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:d,lineHeight:u},"&-message":{color:m},[`&${o}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${l}, opacity ${n} ${l},
        padding-top ${n} ${l}, padding-bottom ${n} ${l},
        margin-bottom ${n} ${l}`},[`&${o}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${o}-with-description`]:{alignItems:"flex-start",paddingInline:h,paddingBlock:$,[`${o}-icon`]:{marginInlineEnd:t,fontSize:g,lineHeight:0},[`${o}-message`]:{display:"block",marginBottom:r,color:m,fontSize:i},[`${o}-description`]:{display:"block"}},[`${o}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Oe=e=>{const{componentCls:o,colorSuccess:n,colorSuccessBorder:r,colorSuccessBg:t,colorWarning:d,colorWarningBorder:i,colorWarningBg:u,colorError:p,colorErrorBorder:l,colorErrorBg:g,colorInfo:m,colorInfoBorder:f,colorInfoBg:_}=e;return{[o]:{"&-success":B(t,r,n,e,o),"&-info":B(_,f,m,e,o),"&-warning":B(u,i,d,e,o),"&-error":T(T({},B(g,l,p,e,o)),{[`${o}-description > pre`]:{margin:0,padding:0}})}}},Ve=e=>{const{componentCls:o,iconCls:n,motionDurationMid:r,marginXS:t,fontSizeIcon:d,colorIcon:i,colorIconHover:u}=e;return{[o]:{"&-action":{marginInlineStart:t},[`${o}-close-icon`]:{marginInlineStart:t,padding:0,overflow:"hidden",fontSize:d,lineHeight:`${d}px`,backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:i,transition:`color ${r}`,"&:hover":{color:u}}},"&-close-text":{color:i,transition:`color ${r}`,"&:hover":{color:u}}}}},Pe=e=>[Me(e),Oe(e),Ve(e)],De=Z("Alert",e=>{const{fontSizeHeading3:o}=e,n=ee(e,{alertIconSizeLG:o,alertPaddingHorizontal:12});return[Pe(n)]}),Ne={success:ge,info:pe,error:ue,warning:de},Re={success:ce,info:re,error:ie,warning:ae},Ge=he("success","info","warning","error"),We=()=>({type:y.oneOf(Ge),closable:{type:Boolean,default:void 0},closeText:y.any,message:y.any,description:y.any,afterClose:Function,showIcon:{type:Boolean,default:void 0},prefixCls:String,banner:{type:Boolean,default:void 0},icon:y.any,closeIcon:y.any,onClose:Function}),je=te({compatConfig:{MODE:3},name:"AAlert",inheritAttrs:!1,props:We(),setup(e,o){let{slots:n,emit:r,attrs:t,expose:d}=o;const{prefixCls:i,direction:u}=le("alert",e),[p,l]=De(i),g=I(!1),m=I(!1),f=I(),_=c=>{c.preventDefault();const v=f.value;v.style.height=`${v.offsetHeight}px`,v.style.height=`${v.offsetHeight}px`,g.value=!0,r("close",c)},$=()=>{var c;g.value=!1,m.value=!0,(c=e.afterClose)===null||c===void 0||c.call(e)},h=se(()=>{const{type:c}=e;return c!==void 0?c:e.banner?"warning":"info"});d({animationEnd:$});const K=I({});return()=>{var c,v,H,z,E,A,L,F,k,M;const{banner:D,closeIcon:N=(c=n.closeIcon)===null||c===void 0?void 0:c.call(n)}=e;let{closable:O,showIcon:C}=e;const V=(v=e.closeText)!==null&&v!==void 0?v:(H=n.closeText)===null||H===void 0?void 0:H.call(n),x=(z=e.description)!==null&&z!==void 0?z:(E=n.description)===null||E===void 0?void 0:E.call(n),R=(A=e.message)!==null&&A!==void 0?A:(L=n.message)===null||L===void 0?void 0:L.call(n),w=(F=e.icon)!==null&&F!==void 0?F:(k=n.icon)===null||k===void 0?void 0:k.call(n),G=(M=n.action)===null||M===void 0?void 0:M.call(n);C=D&&C===void 0?!0:C;const U=(x?Re:Ne)[h.value]||null;V&&(O=!0);const s=i.value,X=me(s,{[`${s}-${h.value}`]:!0,[`${s}-closing`]:g.value,[`${s}-with-description`]:!!x,[`${s}-no-icon`]:!C,[`${s}-banner`]:!!D,[`${s}-closable`]:O,[`${s}-rtl`]:u.value==="rtl",[l.value]:!0}),J=O?a("button",{type:"button",onClick:_,class:`${s}-close-icon`,tabindex:0},[V?a("span",{class:`${s}-close-text`},[V]):N===void 0?a(fe,null,null):N]):null,Q=w&&(ve(w)?Le(w,{class:`${s}-icon`}):a("span",{class:`${s}-icon`},[w]))||a(U,{class:`${s}-icon`},null),Y=_e(`${s}-motion`,{appear:!1,css:!0,onAfterLeave:$,onBeforeLeave:S=>{S.style.maxHeight=`${S.offsetHeight}px`},onLeave:S=>{S.style.maxHeight="0px"}});return p(m.value?null:a($e,Y,{default:()=>[ye(a("div",W(W({role:"alert"},t),{},{style:[t.style,K.value],class:[t.class,X],"data-show":!g.value,ref:f}),[C?Q:null,a("div",{class:`${s}-content`},[R?a("div",{class:`${s}-message`},[R]):null,x?a("div",{class:`${s}-description`},[x]):null]),G?a("div",{class:`${s}-action`},[G]):null,J]),[[Ce,!g.value]])]}))}}}),qe=ne(je),Ke={class:"login-container"},Ue={key:0,class:"error-message"},Xe={__name:"LoginView",setup(e){const o=Ie(),n=be(),r=we(),t=P({password:""}),d=P(!1),i=P("");Se(()=>{r.checkAuth()&&o.push("/")});const u=async()=>{if(!t.value.password){i.value="请输入密码";return}d.value=!0,i.value="";try{const p=await r.login(t.value.password);if(p.success){const l=n.query.redirect||"/";o.push(l)}else i.value=p.message}catch(p){console.error("Unexpected login error:",p),i.value="登录时发生未知错误，请稍后再试"}finally{d.value=!1}};return(p,l)=>{const g=qe,m=ke,f=Ae,_=Fe,$=Ee;return q(),j("div",Ke,[a($,{model:t.value,onFinish:u,class:"login-form"},{default:b(()=>[l[2]||(l[2]=Be("h2",{class:"login-title"},"管理系统登录",-1)),i.value?(q(),j("div",Ue,[a(g,{message:i.value,type:"error","show-icon":""},null,8,["message"])])):Te("",!0),a(f,{name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:b(()=>[a(m,{value:t.value.password,"onUpdate:value":l[0]||(l[0]=h=>t.value.password=h),placeholder:"请输入密码",size:"large",onKeypress:He(u,["enter"])},null,8,["value"])]),_:1}),a(f,null,{default:b(()=>[a(_,{type:"primary","html-type":"submit",size:"large",block:"",loading:d.value},{default:b(()=>l[1]||(l[1]=[ze(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},eo=xe(Xe,[["__scopeId","data-v-4a3f2fa6"]]);export{eo as default};
